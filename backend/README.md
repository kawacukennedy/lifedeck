# LifeDeck Backend API

NestJS-based backend API for the LifeDeck life optimization platform.

## Features

- **Authentication**: JWT-based auth with OAuth support (Google, Apple)
- **User Management**: Profile management and preferences
- **AI-Powered Cards**: Personalized coaching cards generated by OpenAI
- **Analytics**: Life score tracking and progress analytics
- **Subscriptions**: Premium subscription management with Stripe
- **Caching**: Redis-based caching for performance
- **Background Jobs**: Bull queues for async processing

## Tech Stack

- **Framework**: NestJS
- **Database**: PostgreSQL with Prisma ORM
- **Authentication**: JWT + Passport
- **AI**: OpenAI API
- **Caching**: Redis
- **Payments**: Stripe
- **Queue**: BullMQ

## Getting Started

### Prerequisites

- Node.js 18+
- PostgreSQL 14+
- Redis 6+

### Installation

1. Install dependencies:
```bash
npm install
```

2. Set up environment variables:
```bash
cp .env.example .env
# Edit .env with your configuration
```

3. Set up database:
```bash
npx prisma migrate dev
npx prisma db seed
```

4. Start the development server:
```bash
npm run start:dev
```

The API will be available at `http://localhost:3000/v1`

## API Endpoints

### Authentication
- `POST /v1/auth/login` - User login
- `POST /v1/auth/register` - User registration
- `GET /v1/auth/profile` - Get user profile

### Cards
- `GET /v1/cards/daily` - Get daily coaching cards
- `PATCH /v1/cards/:id/complete` - Complete a card

### Analytics
- `GET /v1/analytics` - Get user analytics
- `GET /v1/analytics/life-score` - Get life score

### Subscriptions
- `GET /v1/subscriptions` - Get subscription status
- `POST /v1/subscriptions/upgrade` - Upgrade to premium

## Database Schema

The database uses PostgreSQL with the following main entities:
- Users
- Cards
- User Progress
- Achievements
- Activities
- Subscriptions

## Development

### Running Tests
```bash
npm run test
```

### Code Formatting
```bash
npm run format
```

### Linting
```bash
npm run lint
```

## Deployment

The backend is designed to be deployed to various platforms:
- Vercel
- Railway
- Render
- AWS ECS/EKS

## Contributing

1. Follow the existing code style
2. Write tests for new features
3. Update documentation as needed
4. Use conventional commits

## License

Â© 2024 LifeDeck. All rights reserved.